services:
  cli:
    build: .
    working_dir: /app
    volumes:
      - .:/app
    entrypoint: ["php"]
    environment:
      SOAP_SERVER_HOST: server
      SOAP_SERVER_PORT: "8080"

  server:
    build: .
    working_dir: /app
    volumes:
      - .:/app
    entrypoint: ["php"]
    # Built-in PHP web server, docroot = /app
    command: ["-S", "0.0.0.0:8080", "-t", "/app"]
    ports:
      - "8080:8080"
    environment:
      SOAP_SERVER_HOST: server
      SOAP_SERVER_PORT: "8080"
